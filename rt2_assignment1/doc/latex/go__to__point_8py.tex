\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


Node that implements the \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}} behavior.  


\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}}
\item 
 \mbox{\hyperlink{namespacert2__assignment1}{rt2\+\_\+assignment1}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacego__to__point_a36304a9f313b0579f7fc69fa01695524}{go\+\_\+to\+\_\+point.\+clbk\+\_\+odom}} (msg)
\begin{DoxyCompactList}\small\item\em This function is the Odometry callback It retrieves (x,y,theta) from the Odom message. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a31ee48e5cae36821049b572a96b7c8be}{go\+\_\+to\+\_\+point.\+change\+\_\+state}} (state)
\begin{DoxyCompactList}\small\item\em This function has the scope to update the current global state. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ac688bb56fa84763ea2edefc30cae032a}{go\+\_\+to\+\_\+point.\+normalize\+\_\+angle}} (angle)
\begin{DoxyCompactList}\small\item\em This function normalizes the angle between \mbox{[}-\/pi,pi\mbox{]}. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_aaa40c80713fb412b556666585e35e508}{go\+\_\+to\+\_\+point.\+velocity\+\_\+clbk}} (velocity)
\begin{DoxyCompactList}\small\item\em The data received on the topic /vel are saved in vel, a global variable of type Twist. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a9c3011a3065fcbefcc1c5ad8c9979669}{go\+\_\+to\+\_\+point.\+fix\+\_\+yaw}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em This function orients the robot in the desidered way. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ac8579665c0fbf665f734476554fac37d}{go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em This function implements the behavior that allows the robot to reach the goal. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a4a406386ca62830c19c93949e923f7bd}{go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw}} (des\+\_\+yaw)
\begin{DoxyCompactList}\small\item\em This function orients the robot in the desidered orientation, based the error between the current orientation and the desired one. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ac2587220a4ac9c845bc9c5b0b45d5835}{go\+\_\+to\+\_\+point.\+done}} ()
\begin{DoxyCompactList}\small\item\em This funciton has the aim of stopping the robot. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_aeabc057cb3ea91a0d632b618eec6e961}{go\+\_\+to\+\_\+point.\+time\+\_\+check}} (e\+\_\+t)
\begin{DoxyCompactList}\small\item\em This function checks the time. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_aa8c9e45da31814a8cd403b354dbd6ba4}{go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point}} (req)
\begin{DoxyCompactList}\small\item\em This function implements the state machine. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ab92bd6db1ec323a4d795ed6cb40aebe1}{go\+\_\+to\+\_\+point.\+main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacego__to__point_a91dbaab25e6080f6b5dbf82cac6ce75c}{go\+\_\+to\+\_\+point.\+position\+\_\+}} = Point()
\item 
int \mbox{\hyperlink{namespacego__to__point_ae444f19eb2019982432760ace036ce03}{go\+\_\+to\+\_\+point.\+yaw\+\_\+}} = 0
\item 
int \mbox{\hyperlink{namespacego__to__point_aa2d0ef255bcf5d5faf9ca2764730fb17}{go\+\_\+to\+\_\+point.\+state\+\_\+}} = 0
\item 
\mbox{\hyperlink{namespacego__to__point_a57b4090d0abcbcf0bfa2bcb9329d3036}{go\+\_\+to\+\_\+point.\+pub\+\_\+}} = None
\item 
int \mbox{\hyperlink{namespacego__to__point_a67f95834f0959feb3facd17bc7fa2b38}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+}} = math.\+pi / 9
\item 
int \mbox{\hyperlink{namespacego__to__point_af74ccf49164d0478ca8343e2031d5813}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+}} = math.\+pi / 90
\item 
float \mbox{\hyperlink{namespacego__to__point_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}{go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+}} = 0.\+1
\item 
float \mbox{\hyperlink{namespacego__to__point_a524106fc7667a0927951dfd89d52d6a7}{go\+\_\+to\+\_\+point.\+kp\+\_\+a}} = -\/3.\+0
\item 
float \mbox{\hyperlink{namespacego__to__point_a7bc498652ca66932e704e738b50c297b}{go\+\_\+to\+\_\+point.\+kp\+\_\+d}} = 0.\+2
\item 
float \mbox{\hyperlink{namespacego__to__point_acb4e14986fafe5cb73bb8ad0c178869d}{go\+\_\+to\+\_\+point.\+ub\+\_\+a}} = 0.\+6
\item 
float \mbox{\hyperlink{namespacego__to__point_afecad4058844db05d8321199e25b4498}{go\+\_\+to\+\_\+point.\+lb\+\_\+a}} = -\/0.\+5
\item 
float \mbox{\hyperlink{namespacego__to__point_a16c473b9e717200c483d18e66b48152a}{go\+\_\+to\+\_\+point.\+ub\+\_\+d}} = 0.\+6
\item 
\mbox{\hyperlink{namespacego__to__point_a59ee40a427452666310807580d5bf9b8}{go\+\_\+to\+\_\+point.\+vel}} = Twist()
\item 
\mbox{\hyperlink{namespacego__to__point_a2fd68a76b8583598a4bceccdeae5d73b}{go\+\_\+to\+\_\+point.\+z}}
\item 
\mbox{\hyperlink{namespacego__to__point_a328c9a3bb9322f150f2e67371cd73306}{go\+\_\+to\+\_\+point.\+x}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Node that implements the \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}} behavior. 

\begin{DoxyAuthor}{Author}
Lorenzo Morocutti 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
1/02/2023
\end{DoxyDate}
Publishes to\+:~\newline
 /cmd\+\_\+vel(geometry\+\_\+msgs.\+msg.\+Twist) /destination(std\+\_\+msgs.\+msg.\+Float32)

Subscribes to\+:~\newline
 /sub\+\_\+odom(nav\+\_\+msgs.\+msg.\+Odometry) /sub\+\_\+vel(geometry\+\_\+msgs.\+msg.\+Twist)

Service\+Server\+:~\newline
 none

Action\+Server\+:~\newline
 /go\+\_\+to\+\_\+point (rt2\+\_\+assignment1.\+action.\+Moving)

Description\+:

The node controls the behavior of the non-\/holonomic according to the \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}} behavior via an action server. A F\+SM is used to model the behavior every time a new goal pose is received\+: firstly the robot alight its position with the goal\textquotesingle{}s one, then it goes straight to the goal position, it aligns with the goal orientation and then the goal pose is reached.

The linear and angular velocities are set by the node /user\+\_\+interface and they are received on the topic /vel. Both the velocities are set to zero in case the goal is cancelled by the client. 